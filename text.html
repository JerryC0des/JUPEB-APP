<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hide and Show Div</title>
    <link rel="stylesheet" href="css/subjects/questions.css">
    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <style>
        #hiddenDiv {
            display: none;
        }
    </style>
</head>
<body>
    <div id="content">
      <div class="container">
        <div class="header">
          <img src="/image/go back.png" onclick="window.history.back();">
        </div>
        <div class="exam-content">
          <div class="subject-header">
            <p>JOINT UNIVERSITIES PRELIMINARY EXAMINATIONS BOARD </p>
            <p> 2015 EXAMINATIONS </p>
            <p>BIOLOGY: SCI-J152 </p>
          </div>
          <p>MULTIPLE CHOICE QUESTIONS Answer ALL Questions</p>
          </button>
          <p id="questionIndex"></p>
          <div id="questionDiv"></div>
          <div id="optionDiv"></div>
          <div class="btns">
            <button id="prevbtn" onclick="prevQuestion()">Previous</button>
            <button id="nextbtn" onclick="nextQuestion()">Next</button>
            <button id="submitbtn" onclick="submitExam()">SUBMIT</button>
          </div>
      
          <div id="questionsButton"></div>
        </div>
        
        <div id="scoreDisplay"></div>
        <div id="hiddenDiv"></div>
      </div>
    
      <div class="footer">
        <a href="/home.html"><img class="home-button" src="/image/home-icon.png" alt=""></a>
        <a href=""><img class="setting-button" src="/image/setting-icon.png" alt=""></a>
      </div>
    </div>

    <div id="hiddenDiv">
      <div class="mcq-container">
        <div class="mcq-">
          <h2>MCQ Result</h2>
          <div class="display-result">
            <canvas id="resultChart" width="310" height="200"></canvas>
          </div>
        </div>
        <div class="scoree">
            <div id="result"></div>
          <a class="btn revise" onclick="reviewAnswers(); ">Revise MCQ</a>
        </div>
      </div>
    </div>

    <button onclick="showHiddenDiv()">Show Hidden Div</button>

    <script>
            var exam = {
          "questions": [
              {
                  "question": "Who is the current president of the United states?",
                  "options": ["Muhammedu Buhari", "Vladimir Putin", "Joe Biden", "ngonye uzoma"],
                  "answerPosition": 2
              },
              {
                  "question": "How many countries are in the world?",
                  "options": [249, 195, 300],
                  "answerPosition": 1
              },
              {
                  "question": "How many countries are in the world?",
                  "options": [249, 195, 300],
                  "answerPosition": 1
              },
              {
                  "question": "How many countries are in the world?",
                  "options": [249, 195, 300],
                  "answerPosition": 1
              },
              {
                  "question": "How many countries are in the world?",
                  "options": [249, 195, 300],
                  "answerPosition": 1
              },

              // Add more questions here...
          ]
      };

      var questionDiv = document.getElementById("questionDiv");
      var optionDiv = document.getElementById("optionDiv");
      var questionsButton = document.getElementById("questionsButton");
      var answers = [];
      var currentQuestion = 0;

      function showCbt() {
          questionsButton.innerHTML = "";
          for (var i = 0; i < exam.questions.length; i++) {
              questionsButton.innerHTML += '<button class="qbtn" onclick="showQuestion(' + i + ')">' + (i + 1) + '</button>';
              answers[i] = -1;
          }
          showQuestion(0);
      }

      function startExam() {
          showCbt();
          document.getElementById("questionIndex").innerText = "Question " + (currentQuestion + 1);
          document.getElementById("submitbtn").style.display = "inline-block"; // Hide the start button
          document.getElementById("prevbtn").style.display = "inline-block"; // Hide the start button
          document.getElementById("nextbtn").style.display = "inline-block"; // Hide the start button
      }

      function showQuestion(questionNumber) {
        questionDiv.innerHTML = exam.questions[questionNumber].question;
        optionDiv.innerHTML = "";
        const optionLetters = ['A', 'B', 'C', 'D']; // Letters to be added

        for (var i = 0; i < exam.questions[questionNumber].options.length; i++) {
          const optionLetter = optionLetters[i];
          optionDiv.innerHTML += `
            <label class="radio-label">
                ${optionLetter}. 
                <input type="radio" onclick="selectAnswer(${questionNumber}, ${i})" name="questionOptions"/>
                ${exam.questions[questionNumber].options[i]}
            </label><br>`;
        }

        document.getElementById("questionIndex").innerText = "Question " + (questionNumber + 1);
        const questionButtons = document.querySelectorAll("#questionsButton > button");
        questionButtons.forEach(button => button.classList.remove("currentQuestion", "answeredQuestion"));

        if (answers[questionNumber] !== -1) {
          questionButtons[questionNumber].classList.add("answeredQuestion");
        }
        questionButtons[questionNumber].classList.add("currentQuestion");
        currentQuestion = questionNumber;
      }

      function selectAnswer(questionNumber, optionNumber) {
          answers[questionNumber] = optionNumber;
          document.querySelectorAll("#questionsButton > button")[questionNumber].classList.add("blueHightlight");
          answer[questionNumber] = optionNumber;
      }

      function prevQuestion() {
          if (currentQuestion > 0) {
              showQuestion(currentQuestion - 1);
          }
      }
      
      function nextQuestion() {
          if (currentQuestion < exam.questions.length - 1) {
              showQuestion(currentQuestion + 1);
          }
      }

      function submitExam() {
          var score = 0;
          for (var i = 0; i < exam.questions.length; i++) {
              if (answers[i] == exam.questions[i].answerPosition) {
                  score++;
              }
          }
          displayScore(score);
          makeVisible("hiddenDiv");
          window.location.href = "result.html?score=" + score;

      }

      function displayScore(score) {
          var scoreDisplayDiv = document.getElementById("scoreDisplay");
          scoreDisplayDiv.innerHTML = "Score: " + score + " / " + exam.questions.length;
      }

      function makeVisible(elementId) {
            var element = document.getElementById(elementId);
            element.style.display = "block";
        }
        //review the exam
        function reviewExam() {
            questionsButton.innerHTML = "";
            for (var i = 0; i < exam.questions.length; i++) {
                questionsButton.innerHTML += '<button class="qbtn" onclick="showReview(' + i + ')">' + (i + 1) + '</button>';
            }
            showReview(0);
        }

        //show review for a specific question
        function showReview(questionNumber) {
            showQuestion(questionNumber);

            // Highlight correct answer in green
            const correctAnswerIndex = exam.questions[questionNumber].answerPosition;
            const correctLabel = document.querySelectorAll(".radio-label")[correctAnswerIndex];
            correctLabel.classList.add("correctAnswer");

            // Highlight user's answer in red
            const userAnswerIndex = answers[questionNumber];
            if (userAnswerIndex !== -1) {
                const userLabel = document.querySelectorAll(".radio-label")[userAnswerIndex];
                userLabel.classList.add("userAnswer");
            }
        }

        function showHiddenDiv() {
            document.getElementById("content").style.display = "none";

            document.getElementById("hiddenDiv").style.display = "block";
        }
        startExam();
    </script>
</body>
</html>
